#include <stdio.h>
#include <iostream>
using namespace std;
#define PAYLOAD 14*16

static const uint32_t ethernet_polynomial_le = 0xedb88320;

static uint32_t lan8720_frame_crc(const uint8_t* data, int length)
{
    uint32_t crc = 0xffffffff;  /* Initial value. */

    while (--length >= 0)
    {
        uint8_t current_octet = *data;
        data++;

        for (int bit = 8; --bit >= 0; current_octet >>= 1) {
            if ((crc ^ current_octet) & 1) {
                crc >>= 1;
                crc ^= ethernet_polynomial_le;
            }
            else
                crc >>= 1;
        }
        printf("%X\n", ~crc);
    }
    
    return ~crc;
}
int main()
{
    uint8_t data2[PAYLOAD]
    {0x1 ,0x0 ,0x5E ,0x0 ,0x0 ,0x7 ,0x24 ,0x4B ,0x3 ,0xCE ,0x33 ,0x21 ,0x8 ,0x0 ,0x45 ,0x0
,0x0 ,0xD4 ,0xB9 ,0xB9 ,0x40 ,0x0 ,0x1 ,0x11 ,0x1E ,0x47 ,0xC0 ,0xA8 ,0x0 ,0x69 ,0xE0 ,0x0
,0x0 ,0x7 ,0x1F ,0x41 ,0x1F ,0x41 ,0x0 ,0xC0 ,0x9C ,0xAD ,0x7B ,0x22 ,0x74 ,0x79 ,0x70 ,0x65
,0x22 ,0x3A ,0x22 ,0x61 ,0x6C ,0x69 ,0x76 ,0x65 ,0x22 ,0x2C ,0x22 ,0x74 ,0x74 ,0x6C ,0x22 ,0x3A
,0x38 ,0x30 ,0x30 ,0x30 ,0x2C ,0x22 ,0x73 ,0x69 ,0x64 ,0x22 ,0x3A ,0x22 ,0x75 ,0x75 ,0x69 ,0x64
,0x3A ,0x33 ,0x62 ,0x37 ,0x35 ,0x63 ,0x61 ,0x61 ,0x65 ,0x2D ,0x63 ,0x32 ,0x38 ,0x61 ,0x2D ,0x34
,0x32 ,0x34 ,0x34 ,0x2D ,0x62 ,0x35 ,0x39 ,0x37 ,0x2D ,0x32 ,0x33 ,0x61 ,0x39 ,0x62 ,0x63 ,0x66
,0x36 ,0x65 ,0x65 ,0x36 ,0x63 ,0x22 ,0x2C ,0x22 ,0x64 ,0x61 ,0x74 ,0x61 ,0x22 ,0x3A ,0x7B ,0x22
,0x76 ,0x31 ,0x22 ,0x3A ,0x7B ,0x22 ,0x75 ,0x72 ,0x69 ,0x22 ,0x3A ,0x22 ,0x68 ,0x74 ,0x74 ,0x70
,0x3A ,0x2F ,0x2F ,0x31 ,0x39 ,0x32 ,0x2E ,0x31 ,0x36 ,0x38 ,0x2E ,0x30 ,0x2E ,0x31 ,0x30 ,0x35
,0x3A ,0x38 ,0x30 ,0x30 ,0x31 ,0x2F ,0x6D ,0x73 ,0x2F ,0x31 ,0x2E ,0x30 ,0x2F ,0x22 ,0x7D ,0x2C
,0x22 ,0x76 ,0x32 ,0x22 ,0x3A ,0x7B ,0x22 ,0x75 ,0x72 ,0x69 ,0x22 ,0x3A ,0x22 ,0x68 ,0x74 ,0x74
,0x70 ,0x3A ,0x2F ,0x2F ,0x31 ,0x39 ,0x32 ,0x2E ,0x31 ,0x36 ,0x38 ,0x2E ,0x30 ,0x2E ,0x31 ,0x30
,0x35 ,0x3A ,0x38 ,0x30 ,0x30 ,0x31 ,0x2F ,0x61 ,0x70 ,0x69 ,0x2F ,0x76 ,0x32 ,0x2F ,0x22 ,0x7D};

	//,0x7D ,0x7D ,0x62 ,0x65

    printf("%X\n", lan8720_frame_crc(data2, PAYLOAD));
    system("pause");
}